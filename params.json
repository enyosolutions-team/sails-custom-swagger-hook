{
  "name": "Sails-custom-swagger-hook",
  "tagline": "",
  "body": "# sails-custom-swagger-hook\r\n\r\n[![NPM version][npm-image]][npm-url]\r\n[![Dependency Status][daviddm-image]][daviddm-url]\r\n\r\n> Important! develoment in progress..\r\n\r\n* [swagger.io](http://swagger.io/) hook for [Sails JS](http://sailsjs.org/).\r\n* Customized to support the Swagger 2.0 specification, it is a simple and clean solution to integrate swagger with Sails JS, the application's models, controllers, and routes are automatically aggregated and transformed into a Swagger Document.\r\n* Based in forks(outdated) of [swagger-express](https://github.com/fliptoo/swagger-express), [sails-swagger](https://github.com/tjwebb/sails-swagger) and [sails-swagr](https://github.com/qbanguy/sails-swagr), but uptate and personalize to use with up to date dependencies and with a couple of extra features for allow inject CSS and JS files for brand personalization.\r\n\r\n\r\n### Summary\r\n\r\nThis module will do it best to autogenerate everything it can from Sails configuration and create\r\na Swagger 2.0 JSON Specification to be used with the Swagger-UI. After routes and models have been generated,\r\nyou may create a `docs` directory under `api/` and place YML documents with paths definitions for each Controller. As a result, the generated JSONs and YAMLs will be **merged**.\r\n\r\nHere is how documentation API page looks like ([sample](https://github.com/jasancheg/sails-custom-swagger-hook/blob/master/samples/picture-1.png)):\r\n\r\n![](https://raw.githubusercontent.com/jasancheg/sails-custom-swagger-hook/master/samples/picture-1.png)\r\n\r\n**Logs**\r\n![](https://raw.githubusercontent.com/jasancheg/sails-custom-swagger-hook/master/samples/picture-2.png)\r\n\r\n\r\n## Installation\r\n\r\n    $ npm install sails-custom-swagger-hook --save\r\n\r\n\r\n## Quick Start\r\n\r\nConfigure hook as express middleware.\r\n\r\nKey              | Example value                 | Description\r\n---------------- | ----------------------------- |:---------------------\r\n`apiVersion`     | '1.0'                         | Your api version.\r\n`swaggerVersion` | '2.0'                         | Swagger version.\r\n`swaggerURL`     | '/api/docs'                   | Path to use for swagger ui web interface.\r\n`swaggerJSON`    | '/api-docs.json'              | Path to use for swagger ui JSON.\r\n`basePath`       | sails.config.appUrl           | The basePath for swagger.js\r\n`info`           | { title: '', description: ''} | [Metadata][info] about the API\r\n`apis`           | ['./api/docs/User.yml']       | Define your api array.\r\n`middleware`     | fn                            | Function before response.\r\n`custom`         | {folder: sails.config.appPath + '/assets/docs'} | Path to folder where `custom-swagger.css` and `custom-swagger.js` are stored\r\n\r\n> Note:\r\n> * `sails.config.appPath` is provided by sails js\r\n> * `sails.config.appUrl` is a environment variable, please see: [sails environment variables](http://sailsjs.org/documentation/reference/application/sails-get-base-url)\r\n> * Currently the implementation for personalization is very basic, you can place the folder for the customization files in any convenient folder of your application, for example `assets/docs`, however the name for the css/js files are mandatory. For properly operation of the hook please preserve the name for `custom-swagger.css` and `custom-swagger.js`\r\n> * Files placed in your customization folder are availables as static assets, For example if your customization folder is `assets/docs` any file placed on the folder is available in the url `{host path}/api/docs/{file path/name}`\r\n\r\n\r\n#### Simple set sails.config.appPath variable\r\n\r\nRead:\r\n* [Environment-specific files](http://sailsjs.org/documentation/reference/application/sails-get-base-url)\r\n* [sails get base url](http://sailsjs.org/documentation/concepts/configuration#?environmentspecific-files-config-env)\r\n\r\n*Steps (e.g.):*\r\n* In your `config/local.js` file add the value `appUrl: \"http://localhost:1337\"`\r\n* In your `config/env/heroku.js` file add the value `appUrl: \"http://myapp.herokuapp.com\"`\r\n* In your `config/env/development.js` file add the value `appUrl: \"http://dev.myapp.com\"`\r\n* In your `config/env/staging.js` file add the value `appUrl: \"http://stg.myapp.com\"`\r\n* In your `config/env/production.js` file add the value `appUrl: \"http://myapp.com\"`\r\n* Set the properly NODE_ENV variable on each environment that you configure\r\n\r\n\r\n## Sails Integration\r\n\r\nModify the `config/http.js` to look like:\r\n\r\n```js\r\ncustomMiddleware: function (app) {\r\n  var swagger = require('sails-custom-swagger-hook');\r\n  var express = require('express');\r\n\r\n  app.use(swagger.init(express, app, {\r\n    apiVersion: '1.0',\r\n    swaggerVersion: '2.0',\r\n    swaggerURL: '/api/docs',\r\n    swaggerJSON: '/api-docs.json',\r\n    basePath: sails.config.appUrl,\r\n    info: {\r\n      title: ' App API Documentation',\r\n      description: 'Full API Test Harness'\r\n    },\r\n    custom: {\r\n      folder: sails.config.appPath + '/assets/docs'\r\n    },\r\n    apis: [\r\n      './api/docs/User.yml',\r\n    ]\r\n  }));\r\n  sails.on('ready', function() {\r\n    swagger.sailsGenerate({\r\n      routes: sails.router._privateRouter.routes,\r\n      models: sails.models\r\n    });\r\n  });\r\n},\r\n\r\n```\r\n\r\n## Inject files for look and feel customization, a JS and CSS file\r\n\r\nPlace the personalization files in your selected folder, for example '/assets/docs'. Find below a example for each one of this files:\r\n\r\n```js\r\n// @Name: custom-swagger.js\r\n\r\n// Swagger UI uses jQuery,\r\n// so there is not problem with to use it here\r\n$(document).ready(function() {\r\n\r\n  // Change page title\r\n  $(\"title\").text(\"App Name\");\r\n\r\n  // Change logo link\r\n  $(\"#logo\").attr(\r\n    'href',\r\n    document.location.protocol + '//' + document.location.host\r\n  );\r\n\r\n  // Change brand text\r\n  $(\".logo__title\").text(\"App name\");\r\n\r\n  // Change logo image\r\n  // all files added to the folder with custom files\r\n  // is public in /api/docs/{path to file}\r\n  // also you can use the assets folder provided by sails\r\n  // to store an image or point to an external file\r\n  $(\".logo__img\").attr({\r\n    alt: \"App name\",\r\n    height: \"30\",\r\n    width: \"30\",\r\n    src: \"smile.png\"\r\n  });\r\n\r\n});\r\n```\r\n\r\nCSS file\r\n\r\n```css\r\n/* @Name: custom-swagger.css */\r\n\r\n#custom-swagger .swagger-section #header {\r\n  background-color: #2BA0D3;\r\n}\r\n\r\n#custom-swagger .swagger-section #explore,\r\n#custom-swagger .swagger-section #auth_container .authorize__btn {\r\n  background-color: #42BFeF;\r\n}\r\n\r\n#custom-swagger .swagger-section #api_selector input {\r\n  height: 20px;\r\n  padding: 4px 12px;\r\n  background-color: #fff;\r\n  background-image: none;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.075);\r\n  -webkit-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;\r\n  transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;\r\n  color: #777;\r\n  line-height: 1.4em;\r\n}\r\n```\r\n\r\n#### Swagger-UI\r\n\r\nLift sails and navigate to the specified `swaggerURL` e.g.\r\n\r\n```\r\nhttp://localhost:1337/api/docs\r\n```\r\n\r\n\r\n## Read from YAML file\r\n\r\nExample 'Users.yml'\r\n\r\n```yml\r\n\r\npaths:\r\n  /login:\r\n    post:\r\n      summary: Login with username and password\r\n      notes: Returns a user based on username\r\n      responseClass: User\r\n      nickname: login\r\n      consumes:\r\n        - text/html\r\n      parameters:\r\n\r\n      - name: username\r\n        dataType: string\r\n        paramType: query\r\n        required: true\r\n        description: Your username\r\n\r\n      - name: password\r\n        dataType: string\r\n        paramType: query\r\n        required: true\r\n        description: Your password\r\n\r\ndefinitions:\r\n  User:\r\n    properties:\r\n      username:\r\n        type: String\r\n      password:\r\n        type: String\r\n```\r\n\r\n[Swagger](http://swagger.io/) is a specification and complete framework\r\nimplementation for describing, producing, consuming, and visualizing RESTful web services.\r\nView [demo](http://petstore.swagger.io/).\r\n\r\n\r\nThat&rsquo;s it!\r\n\r\n# Credits\r\n\r\n- [swagger-express](https://github.com/fliptoo/swagger-express),\r\n- [sails-swagger](https://github.com/tjwebb/sails-swagger)\r\n- [sails-swagr](https://github.com/qbanguy/sails-swagr)\r\n- [swagger-ui](https://github.com/swagger-api/swagger-ui)\r\n\r\n\r\n## License\r\n\r\nThe [MIT](https://github.com/jasancheg/sails-custom-swagger-hook/blob/master/LICENSE) License, Â© [jasancheg](https://github.com/jasancheg/)\r\n\r\n\r\n[npm-url]: https://npmjs.org/package/sails-custom-swagger-hook\r\n[npm-image]: https://badge.fury.io/js/sails-custom-swagger-hook.svg?style=flat\r\n[daviddm-url]: https://david-dm.org/jasancheg/sails-custom-swagger-hook\r\n[daviddm-image]: http://img.shields.io/david/jasancheg/sails-custom-swagger-hook.svg?style=flat\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}